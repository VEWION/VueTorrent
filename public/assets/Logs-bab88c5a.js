import{u as q}from"./ArrayPagination-52ed4976.js";import{s as H,av as J,u as K,aw as t,ac as X,G as R,p as Z,J as v,x as Q,q as d,X as S,a2 as Y,W as p,L as b,as as ee,at as te,_ as le}from"./index-d3600ca3.js";import{d as ae}from"./dayjs.min-f1a31599.js";import{A as se,_ as oe,r as y,c as _,C as ne,y as ue,$ as i,a2 as C,D as e,a1 as a,a7 as F,Z as m,u,a0 as V,i as x,a4 as L,F as O,a3 as ie,a5 as re,V as I}from"./vue-aae79161.js";const de={class:"pa-3"},me={style:{"font-size":"1.6em !important"},class:"subtitle-1 ml-2"},ce={class:"d-flex justify-end"},pe=se({__name:"Logs",setup(ge){const w=oe(),{t:c}=H(),h=J(),$=K(),U=y([{title:c("logs.filters.sortBy.id"),value:"id"},{title:c("logs.filters.sortBy.type"),value:"type"},{title:c("logs.filters.sortBy.message"),value:"message"},{title:c("logs.filters.sortBy.timestamp"),value:"timestamp"}]),g=y([{title:t[t.NORMAL],value:t.NORMAL},{title:t[t.INFO],value:t.INFO},{title:t[t.WARNING],value:t.WARNING},{title:t[t.CRITICAL],value:t.CRITICAL}]),o=y([t.NORMAL,t.INFO,t.WARNING,t.CRITICAL]),N=y(["id"]),E=_(()=>h.logs),T=_(()=>E.value.filter(l=>o.value.includes(l.type))),k=_(()=>o.value.length>0),G=_(()=>o.value.length===g.value.length),{paginatedResults:M,currentPage:r,pageCount:f}=q(T,30),A=()=>{w.push({name:"dashboard"})},W=l=>`logtype-${t[l?.type]?.toLowerCase()}`,j=l=>t[l.type],D=l=>ae(l.timestamp*1e3).format($.dateFormat),P=()=>{o.value.length===g.value.length?o.value=[]:o.value=g.value.map(l=>l.value)},B=l=>{l.key==="Escape"&&A()};return ne(()=>{document.addEventListener("keydown",B),X(()=>h.fetchLogs(),15e3),h.fetchLogs(-1)}),ue(()=>{document.removeEventListener("keydown",B)}),(l,n)=>(i(),C("div",de,[e(R,{"no-gutters":"",align:"center",justify:"center"},{default:a(()=>[e(v,null,{default:a(()=>[F("h1",me,m(u(c)("logs.title")),1)]),_:1}),e(v,null,{default:a(()=>[F("div",ce,[e(Q,{icon:"mdi-close",variant:"plain",onClick:A})])]),_:1})]),_:1}),e(Z,null,{default:a(()=>[e(d,null,{default:a(()=>[e(R,null,{default:a(()=>[e(v,{cols:"6"},{default:a(()=>[e(S,{modelValue:o.value,"onUpdate:modelValue":n[0]||(n[0]=s=>o.value=s),items:g.value,label:l.$t("logs.filters.type"),"hide-details":"",multiple:"",chips:""},{"prepend-item":a(()=>[e(d,{title:l.$t("common.selectAll"),onClick:P},{prepend:a(()=>[e(Y,{indeterminate:k.value&&!G.value,"model-value":k.value},null,8,["indeterminate","model-value"])]),_:1},8,["title"]),e(p)]),_:1},8,["modelValue","items","label"])]),_:1}),e(v,{cols:"6"},{default:a(()=>[e(S,{modelValue:N.value,"onUpdate:modelValue":n[1]||(n[1]=s=>N.value=s),items:U.value,label:l.$t("logs.filters.sortBy.label"),"hide-details":"",multiple:"",chips:""},null,8,["modelValue","items","label"])]),_:1})]),_:1})]),_:1}),e(p,{class:"my-3",thickness:"5"}),u(f)>1?(i(),V(d,{key:0},{default:a(()=>[e(b,{modelValue:u(r),"onUpdate:modelValue":n[2]||(n[2]=s=>x(r)?r.value=s:null),length:u(f),"prev-icon":"mdi-menu-left","next-icon":"mdi-menu-right"},null,8,["modelValue","length"])]),_:1})):L("",!0),e(p),(i(!0),C(O,null,ie(u(M),(s,z)=>(i(),C(O,null,[z>0?(i(),V(p,{key:0})):L("",!0),e(d,{class:re(W(s))},{default:a(()=>[e(ee,null,{default:a(()=>[I(m(s.id)+") "+m(s.message),1)]),_:2},1024),e(te,null,{default:a(()=>[I(m(j(s))+" | "+m(D(s)),1)]),_:2},1024)]),_:2},1032,["class"])],64))),256)),T.value.length===0?(i(),V(d,{key:1},{default:a(()=>[I(m(l.$t("logs.emptyLogList")),1)]),_:1})):L("",!0),e(p),u(f)>1?(i(),V(d,{key:2},{default:a(()=>[e(b,{modelValue:u(r),"onUpdate:modelValue":n[3]||(n[3]=s=>x(r)?r.value=s:null),length:u(f),"prev-icon":"mdi-menu-left","next-icon":"mdi-menu-right"},null,8,["modelValue","length"])]),_:1})):L("",!0)]),_:1})]))}});const Ve=le(pe,[["__scopeId","data-v-fe7e9cc9"]]);export{Ve as default};
