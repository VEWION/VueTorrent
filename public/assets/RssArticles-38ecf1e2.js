import{A as Q,_ as q,r as G,d as J,c as K,C as W,h as Y,y as Z,$ as i,a2 as v,D as e,a1 as l,a7 as r,Z as u,u as a,a0 as y,i as L,a4 as m,F as S,a3 as O,a5 as X,V as A,Y as C}from"./vue-aae79161.js";import{u as ee}from"./ArrayPagination-52ed4976.js";import{s as te,z as le,aq as se,ar as ae,G as D,p as T,J as h,x as f,q as _,v as ne,S as oe,n as $,L as N,W as ie,as as re,at as ue,y as de,k as ce,i as me,a6 as fe,a7 as _e,j as pe,_ as ve}from"./index-d3600ca3.js";import{u as Ve}from"./rss-e9e80808.js";import{d as ke}from"./index-da47abda.js";const ge={class:"pa-3"},ye={class:"subtitle-1 ml-2",style:{"font-size":"1.6em !important"}},he={class:"d-flex justify-end"},be={class:"d-flex flex-row align-center justify-center"},Ae={class:"d-flex"},Ce={key:0},xe={key:1},we={class:"d-flex flex-column"},Re=["innerHTML"],Le=Q({__name:"RssArticles",setup(Se){const U=q(),{t:V}=te(),B=le(),F=se(),o=Ve(),p=G(!1),k=J({title:"",content:""}),b=K({get:()=>o.filters.title,set:ke(t=>{o.filters.title=t??""},300)}),g=ae(()=>o.articles.sort((t,n)=>Number(n.parsedDate)-Number(t.parsedDate)),()=>b.value,t=>t.title),{paginatedResults:j,currentPage:d,pageCount:x}=ee(g.results,15);function I(t){window.open(t,"_blank","noreferrer")}function M(t){t.description&&(k.title=t.title,k.content=t.description,p.value=!0)}function E(t){F.pushTorrentToQueue(t.torrentURL)}async function z(t){await o.markArticleAsRead(t.id)}async function H(){await o.markAllAsRead()}function w(){U.push({name:"dashboard"})}function R(t){if(B.hasActiveDialog||p.value)return!1;t.key==="Escape"&&w()}return W(async()=>{await o.fetchFeeds()}),Y(()=>{document.addEventListener("keydown",R)}),Z(()=>{document.removeEventListener("keydown",R)}),(t,n)=>(i(),v("div",ge,[e(D,{align:"center",justify:"center","no-gutters":""},{default:l(()=>[e(h,null,{default:l(()=>[r("h1",ye,u(a(V)("rssArticles.title")),1)]),_:1}),e(h,null,{default:l(()=>[r("div",he,[e(f,{icon:"mdi-close",variant:"plain",onClick:w})])]),_:1})]),_:1}),e(T,null,{default:l(()=>[e(_,null,{default:l(()=>[e(D,null,{default:l(()=>[e(h,{cols:"12"},{default:l(()=>[e(ne,{modelValue:b.value,"onUpdate:modelValue":n[0]||(n[0]=s=>b.value=s),label:t.$t("rssArticles.filters.title"),clearable:"","hide-details":""},null,8,["modelValue","label"])]),_:1}),e(h,{cols:"12"},{default:l(()=>[r("div",be,[e(oe,{modelValue:a(o).filters.unread,"onUpdate:modelValue":n[1]||(n[1]=s=>a(o).filters.unread=s),label:t.$t("rssArticles.filters.unread"),"hide-details":""},null,8,["modelValue","label"]),e($),e(f,{text:t.$t("rssArticles.markAllAsRead"),color:"primary",onClick:H},null,8,["text"])])]),_:1})]),_:1})]),_:1}),a(g).results.value.length?(i(),y(_,{key:0},{default:l(()=>[e(N,{modelValue:a(d),"onUpdate:modelValue":n[2]||(n[2]=s=>L(d)?d.value=s:null),length:a(x),"next-icon":"mdi-menu-right","prev-icon":"mdi-menu-left"},null,8,["modelValue","length"])]),_:1})):m("",!0),e(_,null,{default:l(()=>[e(T,null,{default:l(()=>[(i(!0),v(S,null,O(a(j),(s,P)=>(i(),v(S,null,[P>0?(i(),y(ie,{key:0,color:"white"})):m("",!0),e(_,{class:X({"rss-read":s.isRead}),onClick:c=>M(s)},{default:l(()=>[r("div",Ae,[r("div",null,[e(re,{class:"text-wrap"},{default:l(()=>[A(u(s.title),1)]),_:2},1024),e(ue,{class:"d-block"},{default:l(()=>[r("div",null,u(s.parsedDate.toLocaleString()),1),r("div",null,u(a(V)("rssArticles.item.feedName",{name:a(o).getFeedNames(s.id).join(" | ")})),1),s.author?(i(),v("div",Ce,u(a(V)("rssArticles.item.author",{author:s.author})),1)):m("",!0),s.category?(i(),v("div",xe,u(a(V)("rssArticles.item.category",{category:s.category})),1)):m("",!0)]),_:2},1024)]),e($),r("div",we,[e(f,{icon:"mdi-open-in-new",variant:"text",onClick:C(c=>I(s.link),["stop"])},null,8,["onClick"]),e(f,{color:"accent",icon:"mdi-check",variant:"text",onClick:C(c=>z(s),["stop"])},null,8,["onClick"]),e(f,{icon:"mdi-download",variant:"text",onClick:C(c=>E(s),["stop"])},null,8,["onClick"])])]),e(de,{modelValue:p.value,"onUpdate:modelValue":n[4]||(n[4]=c=>p.value=c)},{default:l(()=>[e(ce,null,{default:l(()=>[e(me,null,{default:l(()=>[e(fe,{color:"transparent"},{default:l(()=>[e(_e,null,{default:l(()=>[A(u(k.title),1)]),_:1}),e(f,{icon:"mdi-close",onClick:n[3]||(n[3]=c=>p.value=!1)})]),_:1})]),_:1}),e(pe,null,{default:l(()=>[r("div",{class:"description-container",innerHTML:k.content},null,8,Re)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:2},1032,["class","onClick"])],64))),256)),a(g).results.value.length===0?(i(),y(_,{key:0},{default:l(()=>[A(u(t.$t("common.emptyList")),1)]),_:1})):m("",!0)]),_:1})]),_:1}),a(g).results.value.length?(i(),y(_,{key:1},{default:l(()=>[e(N,{modelValue:a(d),"onUpdate:modelValue":n[5]||(n[5]=s=>L(d)?d.value=s:null),length:a(x),"next-icon":"mdi-menu-right","prev-icon":"mdi-menu-left"},null,8,["modelValue","length"])]),_:1})):m("",!0)]),_:1})]))}});const Be=ve(Le,[["__scopeId","data-v-47b0b4c8"]]);export{Be as default};
